<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>A Special Surprise</title>
    <meta
      name="description"
      content="A special romantic surprise with heartfelt messages"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Roboto:wght@300;400;500&family=Dancing+Script:wght@500;700&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        --primary-pink: #e91e63;
        --primary-purple: #9c27b0;
        --accent-gold: #ffd700;
        --accent-teal: #00e5ff;
        --dark-bg: #0f0f1a;
        --darker-bg: #0a0a12;
        --card-bg: rgba(25, 25, 40, 0.95);
        --card-border: rgba(255, 255, 255, 0.08);
        --light-text: #f0f0f5;
        --muted-text: #a0a0c0;
        --transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        --shadow-subtle: 0 4px 20px rgba(0, 0, 0, 0.3);
        --shadow-elevated: 0 10px 30px rgba(0, 0, 0, 0.5);
        --glow-pink: 0 0 15px rgba(233, 30, 99, 0.5);
        --glow-purple: 0 0 15px rgba(156, 39, 176, 0.5);
        --glow-teal: 0 0 15px rgba(0, 229, 255, 0.5);
      }

      body {
        font-family: "Roboto", sans-serif;
        background: linear-gradient(
          135deg,
          var(--darker-bg) 0%,
          var(--dark-bg) 100%
        );
        min-height: 100vh;
        color: var(--light-text);
        overflow-x: hidden;
        position: relative;
        line-height: 1.6;
        opacity: 0;
        transition: opacity 0.5s ease;
      }

      h1,
      h2,
      h3 {
        font-family: "Great Vibes", cursive;
        font-weight: 600;
        letter-spacing: 0.5px;
      }

      /* Focus styles for accessibility */
      button:focus-visible,
      a:focus-visible {
        outline: 2px solid var(--accent-gold);
        outline-offset: 2px;
      }

      /* Skip link for accessibility */
      .skip-link {
        position: absolute;
        top: -40px;
        left: 0;
        background: var(--primary-pink);
        color: white;
        padding: 8px;
        z-index: 1000;
        text-decoration: none;
        border-radius: 0 0 4px 0;
        transition: top 0.3s;
      }

      .skip-link:focus {
        top: 0;
      }

      /* Enhanced Background Animations */
      #hearts-container,
      #petals-container,
      #sparkles-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: -1;
      }

      .heart,
      .petal,
      .sparkle {
        position: absolute;
        opacity: 0;
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
        will-change: transform;
      }

      .heart {
        font-size: 1.2rem;
        color: var(--primary-pink);
        text-shadow: 0 0 10px rgba(233, 30, 99, 0.7);
        animation: floatHeart 20s infinite linear;
      }

      .petal {
        font-size: 1rem;
        color: var(--primary-purple);
        text-shadow: 0 0 10px rgba(156, 39, 176, 0.7);
        animation: floatPetal 25s infinite linear;
      }

      .sparkle {
        font-size: 0.8rem;
        color: var(--accent-teal);
        animation: floatSparkle 15s infinite linear;
      }

      @keyframes floatHeart {
        0% {
          transform: translateY(100vh) rotate(0deg);
          opacity: 0;
        }
        10% {
          opacity: 0.7;
        }
        90% {
          opacity: 0.7;
        }
        100% {
          transform: translateY(-100vh) rotate(360deg);
          opacity: 0;
        }
      }

      @keyframes floatPetal {
        0% {
          transform: translateY(100vh) rotate(0deg) scale(0.8);
          opacity: 0;
        }
        10% {
          opacity: 0.6;
        }
        90% {
          opacity: 0.6;
        }
        100% {
          transform: translateY(-100vh) rotate(-360deg) scale(1.2);
          opacity: 0;
        }
      }

      @keyframes floatSparkle {
        0% {
          transform: translateY(100vh) rotate(0deg) scale(1);
          opacity: 0;
        }
        20% {
          opacity: 0.8;
        }
        80% {
          opacity: 0.8;
        }
        100% {
          transform: translateY(-100vh) rotate(180deg) scale(1.5);
          opacity: 0;
        }
      }

      /* Enhanced Music Controls */
      #music-controls {
        position: fixed;
        top: 25px;
        right: 25px;
        z-index: 100;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      #music-toggle {
        background: var(--card-bg);
        border: 1px solid var(--card-border);
        width: 45px;
        height: 45px;
        border-radius: 50%;
        font-size: 1.1rem;
        cursor: pointer;
        backdrop-filter: blur(10px);
        box-shadow: var(--shadow-subtle);
        transition: var(--transition);
        color: var(--primary-purple);
      }

      #music-toggle:hover {
        transform: scale(1.08);
        background: rgba(40, 40, 60, 0.98);
        box-shadow: var(--shadow-elevated);
        color: var(--primary-pink);
      }

      .progress-container {
        width: 120px;
        height: 4px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 2px;
        overflow: hidden;
      }

      .progress-bar {
        height: 100%;
        background: var(--primary-pink);
        width: 0%;
        transition: width 0.1s linear;
      }

      /* Enhanced Container */
      .container {
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
      }

      .content {
        text-align: center;
        max-width: 900px;
        background: var(--card-bg);
        padding: 50px 40px;
        border-radius: 20px;
        box-shadow: var(--shadow-elevated);
        backdrop-filter: blur(15px);
        border: 1px solid var(--card-border);
        opacity: 0;
        transform: translateY(20px);
        animation: fadeInUp 1s forwards 0.3s;
        position: relative;
        overflow: hidden;
      }

      .content::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(
          circle,
          rgba(233, 30, 99, 0.1) 0%,
          transparent 70%
        );
        z-index: -1;
        animation: rotate 20s linear infinite;
      }

      @keyframes rotate {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      @keyframes fadeInUp {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Enhanced Typography */
      .page-title {
        font-size: 4rem;
        margin-bottom: 30px;
        background: linear-gradient(
          135deg,
          var(--primary-pink),
          var(--primary-purple),
          var(--accent-teal)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        position: relative;
        display: inline-block;
        text-shadow: var(--glow-purple);
        animation: float 3s ease-in-out infinite;
      }

      @keyframes float {
        0% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-10px);
        }
        100% {
          transform: translateY(0px);
        }
      }

      .page-title::after {
        content: "";
        position: absolute;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        width: 80px;
        height: 3px;
        background: linear-gradient(
          90deg,
          var(--primary-pink),
          var(--primary-purple)
        );
        border-radius: 2px;
      }

      .intro-text {
        font-size: 1.2rem;
        line-height: 1.8;
        margin-bottom: 35px;
        color: var(--light-text);
        font-weight: 400;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
      }

      /* Enhanced Buttons */
      .btn {
        display: inline-block;
        padding: 14px 32px;
        font-size: 1.1rem;
        text-decoration: none;
        color: white;
        border-radius: 50px;
        transition: var(--transition);
        margin-top: 20px;
        font-weight: 500;
        letter-spacing: 0.5px;
        border: none;
        cursor: pointer;
        position: relative;
        overflow: hidden;
        font-family: "Roboto", sans-serif;
      }

      .glow-btn {
        background: linear-gradient(
          135deg,
          var(--primary-pink),
          var(--primary-purple)
        );
        box-shadow: 0 4px 15px rgba(156, 39, 176, 0.3);
      }

      .glow-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(156, 39, 176, 0.6), var(--glow-purple);
      }

      .btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent
        );
        transition: left 0.7s;
      }

      .btn:hover::before {
        left: 100%;
      }

      /* Enhanced Surprise Container */
      .surprise-container {
        margin: 40px 0;
        position: relative;
      }

      #reveal-btn {
        position: relative;
        overflow: hidden;
        z-index: 1;
        font-size: 1.3rem;
        padding: 16px 40px;
        background: linear-gradient(
          135deg,
          var(--primary-pink),
          var(--primary-purple),
          var(--accent-teal)
        );
        background-size: 200% 200%;
        animation: gradientShift 3s ease infinite;
      }

      @keyframes gradientShift {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      #reveal-btn::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent
        );
        transform: translateX(-100%);
        transition: transform 0.6s;
        z-index: -1;
      }

      #reveal-btn:hover::after {
        transform: translateX(100%);
      }

      /* Enhanced Love Message */
      #love-message {
        margin-top: 30px;
        padding: 30px;
        background: linear-gradient(
          135deg,
          rgba(233, 30, 99, 0.1),
          rgba(156, 39, 176, 0.1),
          rgba(0, 229, 255, 0.1)
        );
        border-radius: 15px;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        position: relative;
        z-index: 2;
        box-shadow: var(--shadow-subtle);
        border: 1px solid var(--card-border);
        opacity: 0;
        transform: translateY(20px);
        transition: all 0.8s ease;
        display: none;
      }

      #love-message.revealed {
        opacity: 1;
        transform: translateY(0);
        display: grid;
      }

      .message-card {
        background: rgba(25, 25, 40, 0.7);
        padding: 20px;
        border-radius: 12px;
        border-left: 4px solid var(--primary-pink);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        animation: fadeInMessage 0.5s ease forwards;
        opacity: 0;
        transform: translateX(-20px);
        text-align: left;
      }

      .message-card:nth-child(1) {
        animation-delay: 0.1s;
      }
      .message-card:nth-child(2) {
        animation-delay: 0.2s;
      }
      .message-card:nth-child(3) {
        animation-delay: 0.3s;
      }
      .message-card:nth-child(4) {
        animation-delay: 0.4s;
      }
      .message-card:nth-child(5) {
        animation-delay: 0.5s;
      }
      .message-card:nth-child(6) {
        animation-delay: 0.6s;
      }
      .message-card:nth-child(7) {
        animation-delay: 0.7s;
      }
      .message-card:nth-child(8) {
        animation-delay: 0.8s;
      }
      .message-card:nth-child(9) {
        animation-delay: 0.9s;
      }

      @keyframes fadeInMessage {
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      .message-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(233, 30, 99, 0.1),
          transparent
        );
        transition: left 0.7s;
      }

      .message-card:hover {
        transform: translateX(5px) translateY(-5px);
        background: rgba(30, 30, 50, 0.8);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .message-card:hover::before {
        left: 100%;
      }

      .message-text {
        font-size: 1.1rem;
        font-weight: 500;
        color: var(--light-text);
        line-height: 1.6;
        margin: 0;
      }

      /* Enhanced Mini Messages */
      .mini-messages {
        display: flex;
        justify-content: center;
        gap: 25px;
        margin-top: 40px;
        flex-wrap: wrap;
      }

      .mini-message {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        background: linear-gradient(
          135deg,
          var(--primary-pink),
          var(--primary-purple)
        );
        display: flex;
        justify-content: center;
        align-items: center;
        color: white;
        font-size: 1.2rem;
        cursor: pointer;
        transition: var(--transition);
        box-shadow: var(--shadow-subtle);
        font-weight: 500;
        position: relative;
        overflow: hidden;
      }

      .mini-message::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.2),
          transparent
        );
        opacity: 0;
        transition: opacity 0.3s;
      }

      .mini-message:hover {
        transform: scale(1.1) rotate(5deg);
        box-shadow: 0 10px 25px rgba(156, 39, 176, 0.5);
      }

      .mini-message:hover::before {
        opacity: 1;
      }

      .mini-message.revealed {
        width: 180px;
        height: auto;
        min-height: 80px;
        border-radius: 20px;
        font-size: 0.9rem;
        padding: 15px;
        text-align: center;
        background: rgba(25, 25, 40, 0.9);
        color: var(--light-text);
        border: 2px solid var(--primary-pink);
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% {
          box-shadow: 0 0 0 0 rgba(233, 30, 99, 0.4);
        }
        70% {
          box-shadow: 0 0 0 10px rgba(233, 30, 99, 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(233, 30, 99, 0);
        }
      }

      /* Enhanced Confetti Canvas */
      #confetti-canvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 9999;
        display: none;
      }

      /* Enhanced Loading indicator */
      .loading-indicator {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 1000;
        background: var(--card-bg);
        padding: 30px;
        border-radius: 15px;
        box-shadow: var(--shadow-elevated);
        display: none;
        text-align: center;
      }

      .loading-spinner {
        width: 40px;
        height: 40px;
        border: 4px solid rgba(255, 255, 255, 0.1);
        border-left: 4px solid var(--primary-pink);
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 0 auto 15px;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      /* Enhanced floating particles */
      .floating-particle {
        position: fixed;
        pointer-events: none;
        z-index: -1;
        opacity: 0;
        animation: floatParticle 15s infinite linear;
      }

      @keyframes floatParticle {
        0% {
          transform: translateY(100vh) rotate(0deg);
          opacity: 0;
        }
        10% {
          opacity: 0.7;
        }
        90% {
          opacity: 0.7;
        }
        100% {
          transform: translateY(-100vh) rotate(360deg);
          opacity: 0;
        }
      }

      /* Love Meter */
      .love-meter-container {
        margin: 30px 0;
        padding: 20px;
        background: rgba(25, 25, 40, 0.7);
        border-radius: 15px;
        border: 1px solid var(--card-border);
      }

      .love-meter {
        width: 100%;
        height: 20px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 10px;
        overflow: hidden;
        margin: 15px 0;
        position: relative;
      }

      .love-fill {
        height: 100%;
        background: linear-gradient(
          90deg,
          var(--primary-pink),
          var(--primary-purple)
        );
        border-radius: 10px;
        transition: width 2s ease;
        width: 0%;
        position: relative;
        overflow: hidden;
      }

      .love-fill::after {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.4),
          transparent
        );
        animation: shimmer 2s infinite;
      }

      @keyframes shimmer {
        0% {
          left: -100%;
        }
        100% {
          left: 100%;
        }
      }

      .love-percentage {
        font-size: 1.5rem;
        font-weight: bold;
        color: var(--primary-pink);
        margin: 10px 0;
      }

      /* NEW ENHANCED GIFT BOX STYLES */
      .gift-box-container {
        margin: 40px 0;
        perspective: 1000px;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .gift-box {
        width: 200px;
        height: 200px;
        position: relative;
        cursor: pointer;
        transform-style: preserve-3d;
        transition: transform 0.5s ease;
      }

      .gift-box:hover {
        transform: scale(1.05);
      }

      .gift-box.open {
        transform: rotateY(180deg) scale(1.1);
      }

      .box {
        width: 100%;
        height: 100%;
        position: absolute;
        background: linear-gradient(
          135deg,
          var(--primary-pink),
          var(--primary-purple)
        );
        border-radius: 10px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 3rem;
        color: white;
        backface-visibility: hidden;
        transition: all 0.5s ease;
      }

      .box-lid {
        width: 100%;
        height: 20%;
        position: absolute;
        background: linear-gradient(
          135deg,
          var(--primary-purple),
          var(--accent-teal)
        );
        border-radius: 10px 10px 0 0;
        top: 0;
        transform-origin: top;
        transition: transform 0.5s ease;
        box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.2);
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 1.5rem;
        color: white;
      }

      .gift-box.open .box-lid {
        transform: rotateX(-110deg);
      }

      .box-content {
        width: 100%;
        height: 100%;
        position: absolute;
        background: linear-gradient(
          135deg,
          var(--accent-teal),
          var(--primary-pink)
        );
        border-radius: 10px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 2rem;
        color: white;
        transform: rotateY(180deg);
        backface-visibility: hidden;
        opacity: 0;
        transition: opacity 0.3s ease 0.5s;
      }

      .gift-box.open .box-content {
        opacity: 1;
      }

      .gift-box-label {
        margin-top: 20px;
        font-size: 1.2rem;
        color: var(--muted-text);
        font-weight: 500;
      }

      /* Enhanced Poem Styling */
      .poem-container {
        margin-top: 40px;
        padding: 30px;
        background: linear-gradient(
          135deg,
          rgba(233, 30, 99, 0.1),
          rgba(156, 39, 176, 0.1),
          rgba(0, 229, 255, 0.1)
        );
        border-radius: 15px;
        box-shadow: var(--shadow-subtle);
        border: 1px solid var(--card-border);
        opacity: 0;
        transform: translateY(20px);
        transition: all 0.8s ease;
        display: none;
        text-align: center;
      }

      .poem-container.revealed {
        opacity: 1;
        transform: translateY(0);
        display: block;
      }

      .poem-title {
        font-family: "Dancing Script", cursive;
        font-size: 2.5rem;
        margin-bottom: 20px;
        color: var(--primary-pink);
        text-shadow: 0 0 10px rgba(233, 30, 99, 0.5);
      }

      .poem-content {
        font-family: "Dancing Script", cursive;
        font-size: 1.8rem;
        line-height: 1.8;
        color: var(--light-text);
        text-align: center;
        max-width: 700px;
        margin: 0 auto;
      }

      .poem-line {
        margin-bottom: 15px;
        opacity: 0;
        transform: translateY(10px);
        animation: fadeInLine 0.8s forwards;
      }

      @keyframes fadeInLine {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* NEW FEATURE 2: Constellation of Love */
      #constellation-container {
        margin: 40px 0;
        text-align: center;
        position: relative;
        height: 400px;
        overflow: hidden;
        border-radius: 15px;
        background: rgba(25, 25, 40, 0.5);
        border: 1px solid var(--card-border);
      }

      #constellation-canvas {
        width: 100%;
        height: 100%;
        display: block;
      }

      .constellation-message {
        position: absolute;
        background: rgba(25, 25, 40, 0.9);
        padding: 10px 15px;
        border-radius: 10px;
        color: var(--light-text);
        font-size: 0.9rem;
        max-width: 200px;
        box-shadow: var(--shadow-subtle);
        border: 1px solid var(--card-border);
        opacity: 0;
        transition: opacity 0.3s ease;
        pointer-events: none;
        z-index: 10;
      }

      /* NEW FEATURE 3: Love Poem Generator */
      #poem-generator {
        margin: 40px 0;
        text-align: center;
        background: rgba(25, 25, 40, 0.7);
        padding: 30px;
        border-radius: 15px;
        border: 1px solid var(--card-border);
      }

      #poem-output {
        margin-top: 30px;
        padding: 20px;
        background: rgba(25, 25, 40, 0.9);
        border-radius: 10px;
        border-left: 4px solid var(--primary-pink);
        font-family: "Great Vibes", cursive;
        font-size: 1.5rem;
        line-height: 1.8;
        color: var(--light-text);
        min-height: 150px;
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transform: translateY(20px);
        transition: all 0.5s ease;
      }

      #poem-output.show {
        opacity: 1;
        transform: translateY(0);
      }

      .feature-title {
        font-size: 2.5rem;
        margin-bottom: 20px;
        background: linear-gradient(
          135deg,
          var(--primary-pink),
          var(--primary-purple)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        position: relative;
        display: inline-block;
      }

      .feature-title::after {
        content: "";
        position: absolute;
        bottom: -8px;
        left: 50%;
        transform: translateX(-50%);
        width: 60px;
        height: 2px;
        background: linear-gradient(
          90deg,
          var(--primary-pink),
          var(--primary-purple)
        );
        border-radius: 2px;
      }

      /* Love Counter */
      .love-counter {
        font-size: 1.2rem;
        margin: 20px 0;
        color: var(--muted-text);
      }

      .counter-number {
        font-weight: bold;
        color: var(--primary-pink);
        font-size: 1.5rem;
      }

      /* Enhanced responsive design */
      @media (max-width: 768px) {
        .page-title {
          font-size: 3rem;
        }

        .content {
          padding: 30px 25px;
        }

        .message-card {
          padding: 15px;
        }

        .message-text {
          font-size: 1rem;
        }

        .mini-message {
          width: 70px;
          height: 70px;
          font-size: 1.1rem;
        }

        .mini-message.revealed {
          width: 150px;
          font-size: 0.85rem;
        }

        .mini-messages {
          gap: 15px;
        }

        #love-message {
          grid-template-columns: 1fr;
        }

        /* New features responsive */
        .feature-title {
          font-size: 2rem;
        }

        .gift-box {
          width: 150px;
          height: 150px;
        }

        .poem-title {
          font-size: 2rem;
        }

        .poem-content {
          font-size: 1.5rem;
        }

        #constellation-container {
          height: 300px;
        }

        #poem-output {
          font-size: 1.3rem;
        }
      }

      @media (max-width: 480px) {
        .page-title {
          font-size: 2.5rem;
        }

        .intro-text {
          font-size: 1.05rem;
        }

        .btn {
          padding: 12px 25px;
          font-size: 1rem;
        }

        .message-text {
          font-size: 0.95rem;
        }

        .mini-message {
          width: 60px;
          height: 60px;
          font-size: 1rem;
        }

        .mini-message.revealed {
          width: 130px;
          font-size: 0.8rem;
          padding: 12px;
        }

        /* New features responsive */
        .feature-title {
          font-size: 1.8rem;
        }

        .gift-box {
          width: 120px;
          height: 120px;
        }

        .poem-title {
          font-size: 1.8rem;
        }

        .poem-content {
          font-size: 1.3rem;
        }

        #constellation-container {
          height: 250px;
        }

        #poem-output {
          font-size: 1.2rem;
          padding: 15px;
        }
      }

      /* Reduced motion support */
      @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }

        .heart,
        .petal,
        .sparkle,
        .floating-particle {
          animation: none;
          opacity: 0.3;
        }
      }

      /* Enhanced visual effects */
      .sparkle {
        position: absolute;
        width: 4px;
        height: 4px;
        background: white;
        border-radius: 50%;
        pointer-events: none;
        z-index: 100;
        animation: sparkle 1.5s ease-out forwards;
      }

      @keyframes sparkle {
        0% {
          transform: scale(0);
          opacity: 0;
        }
        50% {
          transform: scale(1);
          opacity: 1;
        }
        100% {
          transform: scale(0);
          opacity: 0;
        }
      }
    </style>
  </head>
  <body>
    <!-- Skip link for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Loading indicator -->
    <div class="loading-indicator" id="loading-indicator">
      <div class="loading-spinner"></div>
      Loading your special surprise...
    </div>

    <!-- Background animations -->
    <div id="hearts-container"></div>
    <div id="petals-container"></div>
    <div id="sparkles-container"></div>

    <!-- Music controls -->
    <div id="music-controls">
      <button id="music-toggle" aria-label="Toggle background music">♪</button>
      <div class="progress-container">
        <div class="progress-bar" id="progress-bar"></div>
      </div>
      <audio id="background-music" loop>
        <!-- In a real implementation, you would link to an actual audio file -->
        <source src="assets/music/romantic.mp3" type="audio/mpeg" />
        Your browser does not support the audio element.
      </audio>
    </div>

    <!-- Confetti canvas -->
    <canvas id="confetti-canvas"></canvas>

    <!-- Main content -->
    <div class="container" id="main-content" tabindex="-1">
      <div class="content">
        <h1 class="page-title">Just For You 💖</h1>
        <p class="intro-text">
          Every moment with you is special. Click the button below to reveal
          heartfelt messages that express my love for you.
        </p>

        <!-- Love Counter -->
        <div class="love-counter">
          We've shared
          <span class="counter-number" id="days-counter">365</span> beautiful
          days together
        </div>

        <!-- NEW ENHANCED GIFT BOX -->
        <div class="gift-box-container">
          <h2 class="feature-title">A Special Gift For You</h2>
          <div class="gift-box" id="gift-box">
            <div class="box">
              <div class="box-lid">🎀</div>
              💝
            </div>
            <div class="box-content">❤️</div>
          </div>
          <div class="gift-box-label">Click to open your gift</div>
        </div>

        <!-- Love Meter -->
        <div class="love-meter-container">
          <h3>Our Love Meter</h3>
          <div class="love-meter">
            <div class="love-fill" id="love-fill"></div>
          </div>
          <div class="love-percentage" id="love-percentage">0%</div>
        </div>

        <!-- NEW FEATURE 2: Constellation of Love -->
        <div id="constellation-container">
          <h2 class="feature-title">Our Love Constellation</h2>
          <canvas id="constellation-canvas"></canvas>
        </div>

        <!-- NEW FEATURE 3: Love Poem Generator -->
        <div id="poem-generator">
          <h2 class="feature-title">A Poem For You</h2>
          <button class="btn glow-btn" id="generate-poem-btn">
            Generate a Love Poem
          </button>
          <div id="poem-output"></div>
        </div>

        <!-- Main Surprise Button -->
        <div class="surprise-container">
          <button class="btn glow-btn" id="reveal-btn">
            Click to Reveal My Heart
          </button>
        </div>

        <!-- Enhanced Love Message -->
        <div id="love-message">
          <!-- Messages will be inserted here by JavaScript -->
        </div>

        <!-- Mini Messages -->
        <div class="mini-messages">
          <div class="mini-message" data-message="You're my sunshine ☀️">
            ☀️
          </div>
          <div class="mini-message" data-message="My heart beats for you 💓">
            💓
          </div>
          <div class="mini-message" data-message="Forever and always 💫">
            💫
          </div>
          <div class="mini-message" data-message="You complete me ✨">✨</div>
          <div class="mini-message" data-message="My soulmate 💞">💞</div>
        </div>

        <!-- Navigation Button -->
        <a href="index.html" class="btn glow-btn">Back to Start</a>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Fade in the page
        setTimeout(() => {
          document.body.style.opacity = "1";
        }, 300);

        // DOM Elements
        const loadingIndicator = document.getElementById("loading-indicator");
        const revealBtn = document.getElementById("reveal-btn");
        const loveMessage = document.getElementById("love-message");
        const miniMessages = document.querySelectorAll(".mini-message");
        const musicToggle = document.getElementById("music-toggle");
        const backgroundMusic = document.getElementById("background-music");
        const progressBar = document.getElementById("progress-bar");
        const confettiCanvas = document.getElementById("confetti-canvas");
        const daysCounter = document.getElementById("days-counter");
        const loveFill = document.getElementById("love-fill");
        const lovePercentage = document.getElementById("love-percentage");

        // NEW GIFT BOX ELEMENTS
        const giftBox = document.getElementById("gift-box");
        const poemContainer = document.createElement("div");
        poemContainer.className = "poem-container";
        poemContainer.innerHTML = `
          <h2 class="poem-title">For My Beloved</h2>
          <div class="poem-content" id="poem-content"></div>
        `;
        document
          .querySelector(".gift-box-container")
          .appendChild(poemContainer);
        const poemContent = document.getElementById("poem-content");

        // NEW CONSTELLATION ELEMENTS
        const constellationCanvas = document.getElementById(
          "constellation-canvas"
        );
        const constellationCtx = constellationCanvas.getContext("2d");

        // NEW POEM GENERATOR ELEMENTS
        const generatePoemBtn = document.getElementById("generate-poem-btn");
        const poemOutput = document.getElementById("poem-output");

        // Background animation elements
        const heartsContainer = document.getElementById("hearts-container");
        const petalsContainer = document.getElementById("petals-container");
        const sparklesContainer = document.getElementById("sparkles-container");

        // Love messages
        const loveMessages = [
          "Jab bhi ap meri zindagi mein aayi ho, sab kuch aur beautiful lagne laga hai ❤️",
          "Apka saath meri zindagi ka sabse bada gift hai 💝",
          "Jab ap muskuraati ho, lagta hai jaise duniya thamm gayi ho ✨",
          "Ap meri duaon ka wo hissa ho jo hamesha qubool ho gaya 💖",
          "Meri har subah ka reason aur har raat ka armaan sirf ap ho 😘",
          "Ap meri kahani ka sabse khoobsurat chapter ho 📖💕",
          "Dil chahta hai ki har janam mein ap meri saathiya bano 💍",
          "Ap meri life ka wo hissa ho jo kabhi alag nahi ho sakta ❤️",
          "Meri duniya sirf apse complete hoti hai 🌍💞",
        ];

        // NEW POEM LINES
        const poemLines = [
          "In the garden of my heart,",
          "Your love blooms like a rose,",
          "With petals soft and fragrant,",
          "That only you can compose.",
          "",
          "Each moment spent together,",
          "Is a treasure I hold dear,",
          "Your laughter is the melody,",
          "That banishes all fear.",
          "",
          "Through sunshine and through shadows,",
          "Our bond will ever grow,",
          "For in your eyes I've found my home,",
          "And a love that makes me glow.",
        ];

        // NEW POEM GENERATOR DATA
        const poemParts = {
          beginnings: [
            "In the quiet of the night,",
            "Underneath the starry sky,",
            "When morning light appears,",
            "In the whisper of the breeze,",
            "Through the seasons as they change,",
          ],
          middles: [
            "my heart sings only for you,",
            "I feel your love surround me,",
            "I see your smile before me,",
            "our souls dance together,",
            "I cherish every moment,",
          ],
          endings: [
            "eternally yours.",
            "forever and always.",
            "my love for you grows.",
            "you are my everything.",
            "our love story continues.",
          ],
        };

        // Initialize
        initBackgroundAnimations();
        setupConfettiCanvas();
        setupConstellation();
        updateDaysCounter();
        startLoveMeter();

        // Show loading indicator briefly
        loadingIndicator.style.display = "block";
        setTimeout(() => {
          loadingIndicator.style.display = "none";
        }, 1500);

        // NEW GIFT BOX FUNCTIONALITY
        function setupConfettiCanvas() {
          if (!confettiCanvas) return;

          confettiCanvas.width = window.innerWidth;
          confettiCanvas.height = window.innerHeight;
        }

        // Create confetti blast
        function createConfettiBlast() {
          if (!confettiCanvas) return;

          const ctx = confettiCanvas.getContext("2d");
          confettiCanvas.width = window.innerWidth;
          confettiCanvas.height = window.innerHeight;

          // Confetti pieces
          const confettiCount = 200;
          const confettiPieces = [];
          const colors = [
            "#ff9ec6",
            "#c084fc",
            "#fda4af",
            "#f9a8d4",
            "#e9d5ff",
            "#a5f3fc",
            "#fef08a",
            "#bbf7d0",
          ];

          class ConfettiPiece {
            constructor() {
              this.x = Math.random() * confettiCanvas.width;
              this.y = -10;
              this.size = Math.random() * 10 + 5;
              this.speed = Math.random() * 5 + 3;
              this.angle = Math.random() * Math.PI * 2;
              this.spin = Math.random() * 10 - 5;
              this.color = colors[Math.floor(Math.random() * colors.length)];
              this.shape = Math.random() > 0.5 ? "circle" : "rect";
            }

            update() {
              this.y += this.speed;
              this.x += Math.sin(this.angle) * 2;
              this.angle += 0.05;
            }

            draw() {
              ctx.save();
              ctx.translate(this.x, this.y);
              ctx.rotate(this.angle);

              ctx.fillStyle = this.color;

              if (this.shape === "circle") {
                ctx.beginPath();
                ctx.arc(0, 0, this.size, 0, Math.PI * 2);
                ctx.fill();
              } else {
                ctx.fillRect(
                  -this.size / 2,
                  -this.size / 2,
                  this.size,
                  this.size
                );
              }

              ctx.restore();
            }
          }

          // Create confetti pieces
          for (let i = 0; i < confettiCount; i++) {
            confettiPieces.push(new ConfettiPiece());
          }

          let animationId;

          function animate() {
            ctx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);

            let activePieces = 0;
            confettiPieces.forEach((piece) => {
              if (piece.y < confettiCanvas.height) {
                piece.update();
                piece.draw();
                activePieces++;
              }
            });

            if (activePieces > 0) {
              animationId = requestAnimationFrame(animate);
            } else {
              cancelAnimationFrame(animationId);
              confettiCanvas.style.display = "none";
            }
          }

          confettiCanvas.style.display = "block";
          animationId = requestAnimationFrame(animate);
        }

        // Display poem with animation
        function displayPoem() {
          // Clear previous content
          poemContent.innerHTML = "";

          // Add each line with a delay
          poemLines.forEach((line, index) => {
            const lineElement = document.createElement("div");
            lineElement.className = "poem-line";
            lineElement.textContent = line;
            lineElement.style.animationDelay = `${index * 0.2}s`;

            poemContent.appendChild(lineElement);
          });

          // Show the poem container
          poemContainer.classList.add("revealed");
        }

        // Gift box click handler
        giftBox.addEventListener("click", function () {
          if (!giftBox.classList.contains("open")) {
            // Open the gift box
            giftBox.classList.add("open");

            // Create confetti blast after a short delay
            setTimeout(() => {
              createConfettiBlast();
            }, 500);

            // Display the poem after the box is fully open
            setTimeout(() => {
              displayPoem();
            }, 1000);
          }
        });

        // NEW CONSTELLATION SETUP
        function setupConstellation() {
          if (!constellationCanvas) return;

          // Set canvas size
          constellationCanvas.width = constellationCanvas.offsetWidth;
          constellationCanvas.height = constellationCanvas.offsetHeight;

          // Create stars
          const stars = [];
          const starCount = 100;

          for (let i = 0; i < starCount; i++) {
            stars.push({
              x: Math.random() * constellationCanvas.width,
              y: Math.random() * constellationCanvas.height,
              size: Math.random() * 2 + 1,
              brightness: Math.random() * 0.5 + 0.5,
              twinkleSpeed: Math.random() * 0.05 + 0.02,
            });
          }

          // Draw constellation
          function drawConstellation() {
            constellationCtx.clearRect(
              0,
              0,
              constellationCanvas.width,
              constellationCanvas.height
            );

            // Draw connections between stars
            constellationCtx.strokeStyle = "rgba(233, 30, 99, 0.3)";
            constellationCtx.lineWidth = 1;

            for (let i = 0; i < stars.length; i++) {
              for (let j = i + 1; j < stars.length; j++) {
                const dx = stars[i].x - stars[j].x;
                const dy = stars[i].y - stars[j].y;
                const distance = Math.sqrt(dx * dx + dy * dy);

                if (distance < 150) {
                  constellationCtx.globalAlpha = 0.3 - (distance / 150) * 0.3;
                  constellationCtx.beginPath();
                  constellationCtx.moveTo(stars[i].x, stars[i].y);
                  constellationCtx.lineTo(stars[j].x, stars[j].y);
                  constellationCtx.stroke();
                }
              }
            }

            // Draw stars
            constellationCtx.globalAlpha = 1;
            stars.forEach((star) => {
              // Twinkle effect
              star.brightness += star.twinkleSpeed;
              if (star.brightness > 1 || star.brightness < 0.5) {
                star.twinkleSpeed = -star.twinkleSpeed;
              }

              constellationCtx.fillStyle = `rgba(255, 255, 255, ${star.brightness})`;
              constellationCtx.beginPath();
              constellationCtx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
              constellationCtx.fill();
            });

            requestAnimationFrame(drawConstellation);
          }

          drawConstellation();
        }

        // NEW POEM GENERATOR
        function generateLovePoem() {
          const beginning =
            poemParts.beginnings[
              Math.floor(Math.random() * poemParts.beginnings.length)
            ];
          const middle =
            poemParts.middles[
              Math.floor(Math.random() * poemParts.middles.length)
            ];
          const ending =
            poemParts.endings[
              Math.floor(Math.random() * poemParts.endings.length)
            ];

          const poem = `${beginning}<br>${middle}<br>${ending}`;

          poemOutput.innerHTML = poem;
          poemOutput.classList.add("show");

          // Add sparkle effect
          createSparkles(poemOutput);
        }

        // Event listeners
        generatePoemBtn.addEventListener("click", generateLovePoem);

        // Initialize confetti canvas
        setupConfettiCanvas();

        // Handle window resize
        window.addEventListener("resize", setupConfettiCanvas);
        window.addEventListener("resize", setupConstellation);

        // Rest of existing code...
        function initBackgroundAnimations() {
          // Create hearts
          for (let i = 0; i < 15; i++) {
            createFloatingElement(
              "❤️",
              heartsContainer,
              15000 + Math.random() * 10000
            );
          }

          // Create petals
          for (let i = 0; i < 12; i++) {
            createFloatingElement(
              "🌸",
              petalsContainer,
              20000 + Math.random() * 15000
            );
          }

          // Create sparkles
          for (let i = 0; i < 10; i++) {
            createFloatingElement(
              "✨",
              sparklesContainer,
              12000 + Math.random() * 8000
            );
          }
        }

        function createFloatingElement(character, container, duration) {
          const element = document.createElement("div");
          element.className = container.id.replace("-container", "");
          element.innerHTML = character;
          element.style.left = Math.random() * 100 + "vw";
          element.style.animationDuration = duration + "ms";
          element.style.animationDelay = Math.random() * 5000 + "ms";
          container.appendChild(element);

          // Remove and recreate element after animation completes
          setTimeout(() => {
            element.remove();
            createFloatingElement(character, container, duration);
          }, duration);
        }

        function updateDaysCounter() {
          // In a real implementation, you would calculate actual days
          // For demo purposes, we'll use a fixed number
          const days = 365;
          daysCounter.textContent = days;
        }

        function startLoveMeter() {
          let percentage = 0;
          const interval = setInterval(() => {
            percentage += 1;
            loveFill.style.width = percentage + "%";
            lovePercentage.textContent = percentage + "%";

            if (percentage >= 100) {
              clearInterval(interval);
              // Add pulsing effect when complete
              loveFill.style.animation = "pulse 2s infinite";
            }
          }, 30);
        }

        function createSparkles(element) {
          const rect = element.getBoundingClientRect();
          for (let i = 0; i < 10; i++) {
            const sparkle = document.createElement("div");
            sparkle.className = "sparkle";
            sparkle.style.left = rect.left + Math.random() * rect.width + "px";
            sparkle.style.top = rect.top + Math.random() * rect.height + "px";
            document.body.appendChild(sparkle);

            // Remove sparkle after animation
            setTimeout(() => {
              sparkle.remove();
            }, 1500);
          }
        }

        // Event Listeners
        revealBtn.addEventListener("click", function () {
          // Hide the button
          revealBtn.style.display = "none";

          // Show loading indicator briefly
          loadingIndicator.style.display = "block";

          // Create confetti blast
          createConfettiBlast();

          // After a short delay, reveal the love message
          setTimeout(() => {
            loadingIndicator.style.display = "none";
            displayLoveMessages();
            loveMessage.classList.add("revealed");

            // Scroll to the message
            loveMessage.scrollIntoView({ behavior: "smooth", block: "center" });
          }, 2000);
        });

        function displayLoveMessages() {
          // Clear any existing content
          loveMessage.innerHTML = "";

          // Add each message with a staggered animation
          loveMessages.forEach((message, index) => {
            const messageCard = document.createElement("div");
            messageCard.className = "message-card";
            messageCard.innerHTML = `<p class="message-text">${message}</p>`;
            messageCard.style.animationDelay = `${index * 0.2}s`;
            loveMessage.appendChild(messageCard);
          });
        }

        // Mini message click handlers
        miniMessages.forEach((message) => {
          message.addEventListener("click", function () {
            if (!this.classList.contains("revealed")) {
              const messageText = this.getAttribute("data-message");
              this.textContent = messageText;
              this.classList.add("revealed");

              // Create sparkles
              createSparkles(this);
            }
          });
        });

        // Music controls
        musicToggle.addEventListener("click", function () {
          if (backgroundMusic.paused) {
            backgroundMusic.play();
            musicToggle.style.color = "var(--primary-pink)";
            musicToggle.innerHTML = "♫";
          } else {
            backgroundMusic.pause();
            musicToggle.style.color = "var(--primary-purple)";
            musicToggle.innerHTML = "♪";
          }
        });

        // Update progress bar
        backgroundMusic.addEventListener("timeupdate", function () {
          const progress =
            (backgroundMusic.currentTime / backgroundMusic.duration) * 100;
          progressBar.style.width = progress + "%";
        });

        // Click on progress bar to seek
        progressBar.parentElement.addEventListener("click", function (e) {
          const rect = this.getBoundingClientRect();
          const percent = (e.clientX - rect.left) / rect.width;
          backgroundMusic.currentTime = percent * backgroundMusic.duration;
        });

        // Add floating particles on click
        document.addEventListener("click", function (e) {
          createSparkleAtPosition(e.clientX, e.clientY);
        });

        function createSparkleAtPosition(x, y) {
          const sparkle = document.createElement("div");
          sparkle.className = "floating-particle";
          sparkle.innerHTML = "✨";
          sparkle.style.left = x + "px";
          sparkle.style.top = y + "px";
          sparkle.style.animationDuration = 5000 + Math.random() * 10000 + "ms";
          document.body.appendChild(sparkle);

          // Remove after animation
          setTimeout(() => {
            sparkle.remove();
          }, 15000);
        }
      });
    </script>
  </body>
</html>
